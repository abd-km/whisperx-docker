# Default values for whisperx-api

## Replicas
replicaCount: 1

## Container image
image:
  repository: whisperx-api
  pullPolicy: IfNotPresent
  tag: "latest"

## Image pull secrets (if using private registry)
imagePullSecrets: []

## WhisperX configuration
whisperx:
  model:
    name: "large-v3"
    computeType: "float16"
    batchSize: 16
  
  # Hugging Face token (required for diarization)
  hfToken: ""
  # Or use existing secret
  existingSecret: ""

## GPU configuration
gpu:
  enabled: true
  count: 1
  # Node selector for specific GPU type (optional)
  nodeSelector:
    enabled: false
    # nvidia.com/gpu.product: "NVIDIA-H200-Tensor-Core-GPU"

## Resource requests and limits
resources:
  requests:
    cpu: "4"
    memory: "16Gi"
    nvidia.com/gpu: 1
  limits:
    cpu: "8"
    memory: "32Gi"
    nvidia.com/gpu: 1

## Persistent storage for model cache
persistence:
  enabled: true
  storageClass: ""
  accessMode: ReadWriteOnce
  size: 50Gi
  existingClaim: ""

## Service
service:
  type: ClusterIP
  port: 8000

## Ingress
ingress:
  enabled: false
  className: "nginx"
  annotations: {}
  hosts:
    - host: whisperx.local
      paths:
        - path: /
          pathType: Prefix
  tls: []

## Health checks
livenessProbe:
  httpGet:
    path: /health
    port: 8000
  initialDelaySeconds: 60
  periodSeconds: 30

readinessProbe:
  httpGet:
    path: /health
    port: 8000
  initialDelaySeconds: 30
  periodSeconds: 10

## Node selector
nodeSelector: {}

## Tolerations for GPU nodes
tolerations: []

## Affinity rules
affinity: {}
