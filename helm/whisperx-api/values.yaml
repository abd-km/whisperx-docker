# Default values for whisperx-api

## Replicas
replicaCount: 1

## Container image
image:
  repository: abdkm1/whisperx
  pullPolicy: Always
  tag: 0.3

## Image pull secrets (if using private registry)
# For public Docker Hub repos, no secrets needed
imagePullSecrets: 
  - name: gcr-docker-secret
  - name: dockerhub-secret

## WhisperX configuration
whisperx:
  model:
    name: "large-v3"
    computeType: "float16"
    batchSize: 16
  
  # Hugging Face token (required for diarization)
  hfToken: ""
  # Or use existing secret
  existingSecret: ""


## Resource requests and limits
resources:
  requests:
    cpu: "100m"
    memory: "16Gi"
    nvidia.com/mig-1g.18gb: 1
  limits:
    cpu: "500m"
    memory: "32Gi"
    nvidia.com/mig-1g.18gb: 1


## Service
service:
  type: ClusterIP
  port: 8000

## Ingress
ingress:
  enabled: true
  class: kommander-traefik
  host: whisperx.nkp.ajnai.net
  annotations:
    traefik.ingress.kubernetes.io/router.entrypoints: web,websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
  tls: true
  existingSecret: ""

## Certificate (for TLS)
certificate:
  enabled: false  # Set to true to auto-generate TLS secret name
  # If using cert-manager or similar

## Health checks
livenessProbe:
  httpGet:
    path: /health
    port: 8000
  initialDelaySeconds: 60
  periodSeconds: 30

readinessProbe:
  httpGet:
    path: /health
    port: 8000
  initialDelaySeconds: 30
  periodSeconds: 10

## Node selector
nodeSelector: {}

## Tolerations for GPU nodes
tolerations:
  - key: "nvidia.com/gpu"
    operator: "Exists"
    effect: "NoSchedule"


## Affinity rules
affinity: {}
